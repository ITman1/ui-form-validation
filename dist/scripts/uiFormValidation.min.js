!function(window,document,undefined){"use strict";angular.module("uiFormValidation.constants",[]),angular.module("uiFormValidation.values",[]),angular.module("uiFormValidation.providers",[]),angular.module("uiFormValidation.services",["uiFormValidation.constants","uiFormValidation.values"]),angular.module("uiFormValidation.factories",["uiFormValidation.constants","uiFormValidation.values","uiFormValidation.services"]),angular.module("uiFormValidation.controllers",["uiFormValidation.constants","uiFormValidation.values","uiFormValidation.services","uiFormValidation.factories"]),angular.module("uiFormValidation.directives",["uiFormValidation.constants","uiFormValidation.values","uiFormValidation.services","uiFormValidation.factories","uiFormValidation.controllers"]),angular.module("uiFormValidation",["uiFormValidation.constants","uiFormValidation.values","uiFormValidation.services",,"uiFormValidation.factories","uiFormValidation.controllers","uiFormValidation.directives","uiFormValidation.providers","ngSanitize"]),angular.module("uiFormValidation.constants").constant("supportedValidations",{validateRequired:{validationName:"validateRequired",performableValidation:function(){return!0},validate:function(i){return!!i}},validateAdhoc:{validationName:"validateAdhoc",performableValidation:function(){return!0},validate:function(i,r){var o=r.element.attr("validate-adhoc"),t=r.scope.$eval(o);return!t},errorMessage:function(i){var r=i.control.controlElement.attr("validate-adhoc"),o=scope.$eval(r);return o}},validateLength:{validationName:"validateLength",performableValidation:function(){return!0},validate:function(i,r){return i&&i.length&&i.length>=parseInt(r.element.attr("validate-length"))}},validateRegex:{validationName:"validateRegex",performableValidation:function(){return!0},validate:function(i,r){return new RegExp(r.element.attr("validate-regex")).test(i)}}}),angular.module("uiFormValidation.constants").constant("validationErrorsModes",{onSubmitAndInvalid:"onSubmitAndInvalid",onDirtyAndInvalid:"onDirtyAndInvalid",onInvalid:"onInvalid"}),angular.module("uiFormValidation.constants").constant("validationErrorsTemplates",{DEFAULT:"validation-errors-templates/default.html"}),angular.module("uiFormValidation.constants").constant("validationNoticeModes",{onSubmitAndInvalid:"onSubmitAndInvalid",onDirtyAndInvalid:"onDirtyAndInvalid",onInvalid:"onInvalid"}),angular.module("uiFormValidation.directives").directive("uiValidation",function(i,r,o,t,a,n,e,l){var s=1;return{restrict:"A",require:["uiValidation","form"],controller:function(i,r,e){var d=[];angular.forEach(n,function(i){d.push(r.get(i))}),this.controllerName=e.attr("name")||"uiValidation_"+s++,this.initialized=!1,this.isSubmited=!1,this.initializationCallbacks=[],this.formController=undefined,this.formElement=undefined,this.controls={},this.validationNoticeMode=o.validationNoticeMode,this.validationErrorsMode=o.validationErrorsMode,this.validationErrorsLocation=o.validationErrorsLocation,this.validationErrorsTemplate=o.validationErrorsTemplate;var u=this;this.initialize=function(i,r){u.controllerName=i.$name||u.controllerName,u.formController=i,u.formElement=r;var o=i.$addControl;i.$addControl=function(i){o(i),u.addControl(i)},angular.forEach(i,function(i){i&&i.hasOwnProperty("$modelValue")&&u.addControl(i)}),u.initialized=!0,angular.forEach(u.initializationCallbacks,function(i){i()})},this.addControl=function(i){if(i.$name&&""!==i.$name){var r={},o=this.formElement[0].querySelector('[name="'+i.$name+'"]');o=angular.element(o),r.control=i,r.controlElement=o,r.validationNoticeMode=undefined,r.validationErrorsMode=undefined,r.validationErrorsLocation=undefined,r.validationErrorsTemplate=undefined,u.controls[i.$name]=r}},this.afterInitialized=function(i){this.initialized?i():this.initializationCallbacks.push(i)},this.getValidationProperty=function(i,r){if(!u.controls[i])throw"Control with given name "+i+" does not exist.";var o=u.controls[i][r];return o?o:u[r]},this.getValidationErrorsMode=function(i){return this.getValidationProperty(i,"validationErrorsMode")},this.getValidationNoticeMode=function(i){return this.getValidationProperty(i,"validationNoticeMode")},this.getValidationErrorsTemplate=function(i){return this.getValidationProperty(i,"validationErrorsTemplate")},this.getValidationErrorsLocation=function(i){return this.getValidationProperty(i,"validationErrorsLocation")},this.hasControlErrors=function(i){var r=i.controlName,o=i.errors,t=this.controls[r];if(!t)throw"Control with name '"+r+"' does not exist.";var a=!1;return o?angular.forEach(o,function(i){t.control.$error[i]&&(a=!0)}):a=t.control.$invalid,a},this.hasControlsErrors=function(i){var r=!1;return angular.forEach(i,function(i){u.hasControlErrors(i)&&(r=!0)}),r},this.shouldNoticeForControlSelector=function(i){var r=i.controlName,o=this.getValidationNoticeMode(r),t=this.controls[r],n=this.hasControlErrors(i);if(!t)throw"Control with name '"+r+"' does not exist.";var e=!1,l=!1,s=!1;return-1!==o.indexOf(a.onSubmitAndInvalid)&&(e=this.isSubmited&&n),-1!==o.indexOf(a.onDirtyAndInvalid)&&(l=t.control.$dirty&&n),-1!==o.indexOf(a.onInvalid)&&(s=n),e||l||s},this.shouldNoticeForControlSelectors=function(i){var r=!1;return angular.forEach(i,function(i){u.shouldNoticeForControlSelector(i)&&(r=!0)}),r},this.shouldDisplayValidationErrorsForControlSelector=function(i){var r=i.controlName,o=this.getValidationErrorsMode(r),a=this.controls[r],n=this.hasControlErrors(i);if(!a)throw"Control with name '"+r+"' does not exist.";var e=!1,l=!1,s=!1;return-1!==o.indexOf(t.onSubmitAndInvalid)&&(e=this.isSubmited&&n),-1!==o.indexOf(t.onDirtyAndInvalid)&&(l=a.control.$dirty&&n),-1!==o.indexOf(t.onInvalid)&&(s=n),e||l||s},this.shouldDisplayValidationErrorsForControlSelectors=function(i){var r=!1;return angular.forEach(i,function(i){u.shouldDisplayValidationErrorsForControlSelector(i)&&(r=!0)}),r},this.getParsedValidationErrorsLocation=function(i){var r=this.getValidationErrorsLocation(i),o={name:"",args:[]},t=/^\s*(.*?)\s*(\{\s*([^\{\}]*?)\s*\})?$/,a=t.exec(r);if(null===a||4!==a.length)throw"Unable to parse validation errors location - '"+r+"'.";return o.name=a[1].trim(),o.args=a[3]?a[3].split(","):[],o},this.getFormOrControlWrapper=function(i){if(u.formElement[0]===i[0])return u;var r;return angular.forEach(u.controls,function(o){r||o.controlElement[0]!==i[0]||(r=o)}),r},this.injectValidationErrors=function(){angular.forEach(u.controls,function(r,o){var t=angular.element("<div></div>");t.attr("validation-errors",o),t.attr("validation-controller",u.controllerName),t.attr("validation-errors-template",u.getValidationErrorsTemplate(o));var a=u.getParsedValidationErrorsLocation(o);angular.forEach(d,function(o){if(o.name===a.name){var n=null;if(o.compile){if("function"!=typeof o.compile)throw"Validation attribute compile is not function.";n=o.compile(t,a.args)}else n=l(t);n(i,function(t){if(o.link){if("function"!=typeof o.link)throw"Validation attribute link is not function.";o.link(i,t,r,a.args)}})}})})},this.bindSubmitEvent=function(){this.formElement.bind("submit",function(){i.$apply(function(){u.submit()})})},this.validate=function(){angular.forEach(this.controls,function(i){var r=i.control.$viewValue;i.control.$setViewValue(r)})},this.submit=function(){var r=this.formElement.attr("ng-submit");r&&(this.isSubmited=!0,i.$eval(r))}},controllerAs:"uiValidationController",link:function(i,r,o,t){var a=t[0],n=t[1];r.attr("novalidate",!0),a.initialize(n,r),a.injectValidationErrors(),a.bindSubmitEvent(),e.addValidationController(i,a)}}}),angular.module("uiFormValidation.directives").directive("validationController",function(){return{restrict:"A",link:function(i,r,o){if("string"!=typeof o.validationController)throw"Invalid name of the validation controller."}}}),angular.module("uiFormValidation.directives").directive("validationError",function(i,r){return{restrict:"A",require:"validationError",controller:"validationErrorsController",link:function(o,t,a){var n=o[a.validationError],e=r.$new(!0);angular.forEach(n.validationErrorContext,function(i,r){o.$watch(function(){return n.validationErrorContext[r]},function(i){e[r]=i})});var l=i(angular.element("<span>"+n.errorMessage+"</span>"))(e);t.append(l)}}}),angular.module("uiFormValidation.directives").directive("validationErrors",function(i,r,o){return{replace:!0,restrict:"A",require:["^?uiValidation","validationErrors"],templateUrl:function(i){var o=i.attr("validation-errors-template");return o?o:r.validationErrorsTemplate},scope:{uiValidationController:"@",$index:"@"},controller:"validationErrorsController",link:function(r,t,a,n){var e=n[0],l=n[1],s=null;s=e?e.controllerName:a.validationController,i.addValidationErrorsController(r,s,l),r.errors={},i.afterValidationControllerInitialized(r,s,function(){var n=i.validationControllers[r][s],e=l.parseControlErrorsSelectors(a.validationErrors);r.$watch(function(){return n.shouldDisplayValidationErrorsForControlSelectors(e)},function(i){t.toggleClass("hidden",!i)}),angular.forEach(e,function(i){var t=n.controls[i.controlName];if(!t)throw"Undefined control '"+i.controlName+'" to watch.';r.$watchCollection(function(){return t.control.$error},function(){if(i.errors&&i.errors.length<1)return void(r.errors={});var a=o.getControlErrors(r,n,i,t);r.errors[i.controlName]=a})})})}}}),angular.module("uiFormValidation.directives").directive("validationErrorsLocation",function(){return{restrict:"A",require:"^uiValidation",link:function(i,r,o,t){t.afterInitialized(function(){var i=t.getFormOrControlWrapper(r);if(!i)throw"Unable to get element wrapper. Directive validation-errors-location is not placed probably on the form or input element.";i.validationErrorsLocation=o.validationErrorsLocation})}}}),angular.module("uiFormValidation.directives").directive("validationErrorsMode",function(){return{restrict:"A",require:"^uiValidation",link:function(i,r,o,t){t.afterInitialized(function(){var i=t.getFormOrControlWrapper(r);if(!i)throw"Unable to get element wrapper. Directive validation-errors-mode is not placed probably on the form or input element.";i.validationErrorsMode=o.validationErrorsMode.split(/\s+/)})}}}),angular.module("uiFormValidation.directives").directive("validationErrorsTemplate",function(){return{restrict:"A",require:"^uiValidation",link:function(i,r,o,t){t&&t.afterInitialized(function(){var i=t.getFormOrControlWrapper(r);i&&(i.validationErrorsTemplate=o.validationErrorsTemplate)})}}}),angular.module("uiFormValidation.directives").directive("validationNotice",function(){return{restrict:"A",require:["^uiValidation","validationNotice"],controller:"validationNoticeController",link:function(i,r,o,t){var a=t[0],n=t[1],e=o.validationNotice,l=n.parseControlErrorsSelectors(e);a.afterInitialized(function(){i.$watch(function(){return a.shouldNoticeForControlSelectors(l)},function(i){r.toggleClass("has-error",i)})})}}}),angular.module("uiFormValidation.directives").directive("validationNoticeMode",function(){return{restrict:"A",require:"^uiValidation",link:function(i,r,o,t){t.afterInitialized(function(){var i=t.getFormOrControlWrapper(r);if(!i)throw"Unable to get element wrapper. Directive validation-notice-mode is not placed probably on the form or input element.";i.validationNoticeMode=o.validationNoticeMode.split(/\s+/)})}}}),angular.module("uiFormValidation.directives").directive("validationSubmit",function(i,r){return{restrict:"A",link:function(i,o,t){r.afterValidationControllerInitialized(i,t.validationSubmit,function(){var a=r.validationControllers[i][t.validationSubmit];o.bind("click",function(){i.$apply(function(){a.submit()})})})}}}),angular.module("uiFormValidation.controllers").controller("validationErrorsController",function(i,r){this.parseControlErrorsSelectors=function(o){return i.isExpression(o)?(o=i.parseExpression(o),i.evalAndParseControlErrorsSelectors(r.$parent,o)):i.parseControlErrorsSelectors(o)}}),angular.module("uiFormValidation.controllers").controller("validationNoticeController",function(i,r){this.parseControlErrorsSelectors=function(o){return i.isExpression(o)?(o=i.parseExpression(o),i.evalAndParseControlErrorsSelectors(r.$parent,o)):i.parseControlErrorsSelectors(o)}}),angular.module("uiFormValidation.factories").factory("uiFormValidation.validationErrorsLocation.after",function(i){return{name:"after",link:function(r,o,t,a){var n=t.controlElement;if(a.length>0){var e=i.selectFromScope(n,a[0]);e&&(n=e)}n.after(o)}}}),angular.module("uiFormValidation.factories").factory("uiFormValidation.validationErrorsLocation.append",function(i){return{name:"append",link:function(r,o,t,a){var n=t.controlElement;if(a.length>0){var e=i.selectFromScope(n,a[0]);e&&(n=e)}n.append(o)}}}),angular.module("uiFormValidation.factories").factory("uiFormValidation.validationErrorsLocation.explicit",function(){return{name:"explicit",compile:function(){return function(){}}}}),angular.module("uiFormValidation.providers").provider("uiFormValidation",function(i,r,o,t,a){function n(){this.customValidations=[],this.validationNoticeMode=e.validationNoticeMode,this.validationErrorsMode=e.validationErrorsMode,this.validationErrorsLocation=e.validationErrorsLocation,this.validationErrorsTemplate=e.validationErrorsTemplate,this.formValidations=e.formValidations,this.validationErrorMessagesLocale=e.validationErrorMessagesLocale,angular.forEach(e.supportedValidations,function(i){e.addFormValidation(i)})}var e=this;this.formValidations={},this.validationErrorsTemplate=a.DEFAULT,this.validationErrorMessagesLocale=undefined,this.validationErrorsMode=[r.onSubmitAndInvalid,r.onDirtyAndInvalid],this.validationNoticeMode=[o.onSubmitAndInvalid,o.onDirtyAndInvalid],this.validationErrorsLocation="after{this}",this.addFormValidation=function(r){this.formValidations[r.validationName]=r,i.directive.apply(null,[r.validationName,function(){return{restrict:"A",require:["^uiValidation","ngModel"],link:function(i,o,t,a){var n=a[0],l=a[1];if(r.performableValidation&&"function"==typeof r.performableValidation,l.$validators)l.$validators[r.validationName]=function(a,s){var d=a||s;return e.validate(d,n,l,r,i,o,t)},l.$validate();else{var s=l.$modelValue||l.$viewValue,d=e.validate(s,n,l,r,i,o,t);d?l.$setValidity(r.validationName,!0):l.$setValidity(r.validationName,!1),l.$parsers.unshift(function(a){var s=e.validate(a,n,l,r,i,o,t);return l.$setValidity(r.validationName,s),a}),l.$formatters.unshift(function(a){var s=e.validate(a,n,l,r,i,o,t);return l.$setValidity(r.validationName,s),a})}}}}])},this.validate=function(i,r,o,t,a,n,e){var l={uiValidationController:r,ngModelController:o,validation:t,scope:a,attrs:e,element:n};return t.validate(i,l)},this.supportedValidations=t,this.$get=[function(){return new n}]}),angular.module("uiFormValidation.services").service("utilsService",function(){var $this=this;this.validationErrorsControllers={},this.validationControllers={},this.validationControllerInitializationCallbacks={},this.addValidationErrorsController=function(i,r,o){this.validationErrorsControllers[i]||(this.validationErrorsControllers[i]={},i.$on("$destroy",function(){delete $this.validationErrorsControllers[i]})),this.validationErrorsControllers[i][r]||(this.validationErrorsControllers[i][r]=[]),this.validationErrorsControllers[i][r].push(o)},this.addValidationController=function(i,r){this.validationControllers[i]||(this.validationControllers[i]=[],i.$on("$destroy",function(){delete $this.validationControllers[i]})),this.validationControllers[i][r.controllerName]=r,this.validationControllerInitializationCallbacks[i]&&this.validationControllerInitializationCallbacks[i][r.controllerName]&&(angular.forEach(this.validationControllerInitializationCallbacks[i][r.controllerName],function(i){r.afterInitialized(i)}),delete this.validationControllerInitializationCallbacks[i][r.controllerName])},this.selectFromScope=function(scope,selector){return selector=selector.trim(),""!==selector||"this"!==selector?eval("scope."+selector):scope},this.afterValidationControllerInitialized=function(i,r,o){this.validationControllers[i]&&this.validationControllers[i][r]?this.validationControllers[i][r].afterInitialized(o):(this.validationControllerInitializationCallbacks[i]||(this.validationControllerInitializationCallbacks[i]={},i.$on("$destroy",function(){delete $this.validationControllerInitializationCallbacks[i]})),this.validationControllerInitializationCallbacks[i][r]||(this.validationControllerInitializationCallbacks[i][r]=[]),this.validationControllerInitializationCallbacks[i][r].push(o))},this.parseControlErrorsSelectors=function(i){var r={};return angular.forEach(i.split(/\s+/),function(i){var o=/^\s*(.*?)\s*(\{\s*([^\{\}]*?)\s*\})?$/,t=o.exec(i);if(null===t||4!==t.length)throw"Unable to parse input-errors controls.";var a=t[1];r[a]={},r[a].controlName=a,r[a].errors=t[3]?t[3].split(","):undefined,r[a].errors&&(r[a].errors=r[a].errors.map(function(i){return i.trim()}))}),r},this.evalAndParseControlErrorsSelectors=function(i,r){var o=r.split(/\s+/);return o=o.map(function(r){return i.$eval(r)}),r=o.join(" "),this.parseControlErrorsSelectors(r)},this.isExpression=function(i){var r=/^\s*\{([^\{\}]*)\}\s*?$/,o=r.exec(i);return null!==o},this.parseExpression=function(i){var r=/^\s*\{([^\{\}]*)\}\s*?$/,o=r.exec(i);return null!==o&&2===o.length?o[1]:undefined},this.camelToSnakeCase=function(i,r){return i.replace(/[A-Z]/g,function(i,o){return(o>0?r:"")+i.toLowerCase()})}}),angular.module("uiFormValidation.services").service("validationErrorMessagesService",function(i,r,o,t,a,n,e,l,s,d){var u=this,c=n("validationErrorMessagesCache");this.invalidateCache=function(i){i&&"DEFAULT"!=i?c.remove(i):c.removeAll()},this.addValidationErrorMessages=function(i,r,o){var t=this.getValidationErrorMessages(i);t||(t=[],this.setValidationErrorMessages(i,t)),t.push(r),a.put(r,o),this.invalidateCache(i)},this.removeValidationErrorMessages=function(i,r){var o=this.getValidationErrorMessages(i);if(!o)return void d.error("Validation error messages with given locale '"+i+"' do not exist.");var t=o.indexOf(r);return-1==t?void d.error("Provider with name '"+r+"' of the error messages with given locale does not exist."):(o.splice(t,1),a.remove(r),void this.invalidateCache(i))},this.getErrorMessagesLocale=function(){return i.validationErrorMessagesLocale?i.validationErrorMessagesLocale:t.id},this.getErrorMessagesLocaleKey=function(i){return i.replace("-","_").toUpperCase()},this.getValidationErrorMessages=function(i){var o=this.getErrorMessagesLocaleKey(i);return r[o]},this.setValidationErrorMessages=function(i,o){var t=this.getErrorMessagesLocaleKey(i);r[t]=o},this.getLocalValidationErrorMessages=function(i){var i=i?i:this.getErrorMessagesLocale(),r=this.getValidationErrorMessages(i);return this.getValidationErrorMessagesInstance(i,r)},this.getDefaultValidationErrorMessages=function(){return this.getValidationErrorMessagesInstance("DEFAULT",r.DEFAULT)},this.getValidationErrorMessagesInstance=function(i,r){var o=c.get(i);if(o)return o;var t={};if(angular.forEach(r,function(i){var r=a.get(i),o=angular.fromJson(r);angular.extend(t,o)}),"DEFAULT"!=i){var n=this.getDefaultValidationErrorMessages();angular.forEach(n,function(i,r){t[r]||(t[r]=i)})}return c.put(i,t),t},this.getControlErrors=function(r,t,a,n){var e={};return e.control=n.control,e.controlElement=e.controlElement,e.errors={},n.control&&n.control.$error&&angular.forEach(n.control.$error,function(l,s){var d=i.formValidations[s],c=u.getLocalValidationErrorMessages(),v={validationName:s,validationValue:undefined,controlValue:undefined,control:n,validationController:t,errorMessages:c,scope:r.$parent,errorsScope:r};r.$watch(function(){return n.control.$viewValue||n.control.$modelValue},function(i){v.controlValue=i});var m=null;if(a.errors&&-1==a.errors.indexOf(s))delete e.errors[s];else if(l&&d){var f=o.camelToSnakeCase(s,"-");v.validationValue=n.controlElement.attr(f),d.errorMessage?(m=d.errorMessage,"Function"==typeof m&&(m=m(v))):m=c[s]}else l&&(m=c[s]||c.__default__);m&&("Function"==typeof m&&(m=m(v)),e.errors[s]={validationErrorContext:v,errorMessage:m})}),e}}),angular.module("uiFormValidation.values").constant("validationErrorMessages",{DEFAULT:["validation-error-messages/en-US.messages"],EN_US:["validation-error-messages/en-US.messages"],CS_CZ:["validation-error-messages/cs-CZ.messages"]}),angular.module("uiFormValidation.values").value("validationErrorsLocationFactories",{after:"uiFormValidation.validationErrorsLocation.after",append:"uiFormValidation.validationErrorsLocation.append",explicit:"uiFormValidation.validationErrorsLocation.explicit"}),angular.module("uiFormValidation").run(["$templateCache",function(i){i.put("validation-errors-templates/default.html",'<div class="alert alert-danger">\r\n    <div ng-repeat="controlErrors in errors">\r\n	    <div class="row" ng-repeat="controlError in controlErrors.errors">\r\n		    <span validation-error="controlError"></span>\r\n	    </div>\r\n	</div>\r\n</div>'),i.put("validation-error-messages/cs-CZ.messages",'{\r\n	"__default__" : "Validace {{validationName}} selhala.",\r\n	"required" : "Polo�ka je povinn�.",\r\n	"validateRequired" : "Polo�ka je povinn�.",\r\n	"validateLength" : "O�ek�v�n text alespo� o d�lce {{validationValue}} znak�, sou�asn� d�lka je {{controlValue ? controlValue.length : \'0\'}} znak�.",\r\n	"validateRegex" : "Hodnota nespl�uje po�adovan� regul�rn� v�raz: {{validationValue}}."\r\n}'),i.put("validation-error-messages/en-US.messages",'{\r\n	"__default__" : "Validation {{validationName}} has failed.",\r\n	"required" : "Field is required.",\r\n	"validateRequired" : "Field is required.",\r\n	"validateLength" : "Expecting text with length at least {{validationValue}} characters, but length is {{controlValue ? controlValue.length : \'0\'}} characters.",\r\n	"validateRegex" : "Value does not matches regular expression {{validationValue}}."\r\n}\r\n')}])}(window,document);